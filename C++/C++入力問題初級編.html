<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C++ å…¥åŠ›å•é¡Œ åˆç´šç·¨</title>
  <link rel="stylesheet" href="../keep_out/style2.css">
<audio id="se-correct" src="../keep_out/correct.mp3" preload="auto"></audio>
<audio id="se-wrong" src="../keep_out/wrong.mp3" preload="auto"></audio>
<audio id="se-start" src="../keep_out/start.mp3" preload="auto"></audio>
  <audio id="se-end" src="../keep_out/end.mp3" preload="auto"></audio>

</head>
<body>
  <audio id="bgm" src="../keep_out/BGM.mp3" loop></audio>
  <button id="bgm-toggle">â–¶ï¸ BGMã‚’å†ç”Ÿ</button>
  <div class="quiz-container" id="home">
    <h1>C++ å…¥åŠ›å•é¡Œ åˆç´šç·¨</h1>
    <p>å…¨15å•ã§ã™ã€‚</p>
    <button onclick="startQuiz()">é–‹å§‹</button>
    <a href="C++.html" class="back-button">å•é¡Œé¸æŠã«æˆ»ã‚‹</a>
  </div>

  <div class="quiz-container" id="quiz" style="display: none;"></div>

  <script>
  const RANKING_KEY = "cpp_in_quiz_ranking_easy";
  const questions = [

  {
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<pre>string a = \"Hello\";\nstring b = \"World\";\ncout << a + \" \" + b << endl;</pre>",
  answer: "Hello World",
  explanation: "æ–‡å­—åˆ—aã¨bã‚’ç©ºç™½ã‚’æŒŸã‚“ã§é€£çµã—å‡ºåŠ›ã—ã¦ã„ã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<pre>int a = 8;\nint b = 4;\nif (a % b == 0) cout << \"OK\" << endl;\nelse cout << \"NG\" << endl;</pre>",
  answer: "OK",
  explanation: "8ã¯4ã§å‰²ã‚Šåˆ‡ã‚Œã‚‹ã®ã§ã€æ¡ä»¶ã¯trueã«ãªã‚Š\"OK\"ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<pre>bool flag = (3 + 2 == 5);\ncout << flag << endl;</pre>",
  answer: "1",
  explanation: "çœŸå½å€¤flagã¯trueï¼ˆ1ï¼‰ãªã®ã§ã€1ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚"
},

  {
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<pre>double x = 2.9;\nint y = x * 2;\ncout << y << endl;</pre>",
  answer: "5",
  explanation: "x * 2 ã®çµæœã¯ 5.8 ã ãŒã€ãã‚Œã‚’ int å‹ã«ä»£å…¥ã—ã¦ã„ã‚‹ãŸã‚ã€<br>å°æ•°ç‚¹ä»¥ä¸‹ã¯åˆ‡ã‚Šæ¨ã¦ã‚‰ã‚Œã¦ 5 ã«ãªã‚‹ã€‚"
},


  {
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>int x = 3;\nbool a = true;\nbool b = x < 10;\nbool c = false;\n\nif (a && b) {\n  cout << \"hello\" << endl;\n}\nif (c) {\n  cout << \"world\" << endl;\n}</pre>",
  answer: "hello",
  explanation: "x < 10 ã¯ true ãªã®ã§ã€a && b ã¯ trueã€‚<br>ã‚ˆã£ã¦ \"hello\" ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚<br>c ã¯ false ãªã®ã§ \"world\" ã¯å‡ºåŠ›ã•ã‚Œãªã„ã€‚"
},

  {
    q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>int a = 10;\nint b = 4;\ndouble x = a / b;\ncout << x << endl;</pre>",
    answer: "2",
    explanation: "intåŒå£«ã®å‰²ã‚Šç®—ã¯å°æ•°ç‚¹ä»¥ä¸‹åˆ‡ã‚Šæ¨ã¦ â†’ 10 / 4 = 2 â†’ doubleå‹ã«å¤‰æ›ã•ã‚Œã¦ã‚‚2.0ã§ãªã2ã«ãªã‚‹ã€‚"
  },

  {
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>int x = 5;\ncout << ++x << endl;\ncout << x << endl;</pre>",
  answer: "6\n6",
  explanation: "++x ã¯å…ˆã« x ã‚’1å¢—ã‚„ã—ã¦ã‹ã‚‰å‡ºåŠ›ã™ã‚‹ã®ã§ã€1è¡Œç›®ã¯6ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚<br>ãã®å¾Œã® x ã®å€¤ã‚‚6ãªã®ã§ã€2è¡Œç›®ã‚‚6ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>int x = 5;\ncout << x++ << endl;\ncout << x << endl;</pre>",
  answer: "5\n6",
  explanation: "x++ ã¯å‡ºåŠ›å¾Œã« x ã‚’1å¢—ã‚„ã™ã€‚\n1è¡Œç›®ã§ã¯ x ã®å…ƒã®å€¤ï¼ˆ5ï¼‰ãŒ<br>å‡ºåŠ›ã•ã‚Œã€ãã®å¾Œ x ã¯6ã«ãªã‚‹ã€‚<br>2è¡Œç›®ã§ã¯æ›´æ–°å¾Œã® xï¼ˆ6ï¼‰ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>bool a = false;\nbool b = true;\nbool c = !a || (a && b);\nif (c) cout << \"yes\" << endl;\nelse cout << \"no\" << endl;</pre>",
  answer: "yes",
  explanation: "!a ã¯ trueã€a && b ã¯ falseã€‚\nã‚ˆã£ã¦ true || false = trueã€c ã¯ trueã€‚\nã—ãŸãŒã£ã¦ \"yes\" ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>int sum = 0;\nfor (int i = 1; i <= 3; i++) {\n  sum += i;\n}\ncout << sum << endl;</pre>",
  answer: "6",
  explanation: "1 + 2 + 3 ãªã®ã§ sum = 6ã€‚\nã‚ˆã£ã¦ \"6\" ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’ã€åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>vector&lt;int&gt; a = {1, 2, 3, 4};\nfor (int i = 0; i < 4; i++) {\n  a[3 - i] += i;\n}\nfor (int x : a) cout << x << ' ';</pre>",
  answer: "4 4 4 4",
  explanation: "a[3 - i] ã« i ã‚’åŠ ãˆã‚‹ã®ã§ã€å¾Œã‚ã‹ã‚‰é †ã« i ã‚’è¶³ã—ã¦ã„ãã€‚<br>åˆæœŸé…åˆ—: {1,2,3,4}<br>â†’ a[3] += 0 â†’ 4<br>â†’ a[2] += 1 â†’ 4<br>â†’ a[1] += 2 â†’ 4<br>â†’ a[0] += 3 â†’ 4<br>for(int x : a)ã¯ç¯„å›²foræ–‡ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ã€aã®è¦ç´ ã‚’å…¨ã¦å‡ºåŠ›ã™ã‚‹ã®ã«ä½¿ã£ã¦ã„ã‚‹ã€‚<br>ã‚ˆã£ã¦å‡ºåŠ›ã¯ 4 4 4 4ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’ã€åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>vector&lt;int&gt; a = {5, 3, 1, 2};\nsort(a.begin(), a.end());\nreverse(a.begin(), a.end());\nfor (int x : a) cout << x << ' ';</pre>",
  answer: "5 3 2 1",
  explanation: "ã¾ãš sort ã§æ˜‡é †ã«ä¸¦ã¹æ›¿ãˆã‚‹ã¨ {1, 2, 3, 5} ã«ãªã‚‹ã€‚<br>ãã®å¾Œ reverse ã§åè»¢ã™ã‚‹ã¨ {5, 3, 2, 1}ã€‚<br>ã‚ˆã£ã¦å‡ºåŠ›ã¯ 5 3 2 1ã€‚<br>å¤§ãã„é †ã«ã—ãŸã„å ´åˆã€sort(a.rbegin(), a.rend())ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n<pre>int a = 10;\nint b = 7;\nint c = 4;\ncout << a - b % c << endl;</pre>",
  answer: "7",
  explanation: "b % c = 7 % 4 = 3<br>ã‚ˆã£ã¦ a - b % c = 10 - 3 = 7"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã®å‡ºåŠ›ã‚’åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<pre>int x = 5;\ncout << x << endl;\n\nif (x == 5) {\n  cout << x << endl;\n\n  string x = \"hello\";\n  cout << x << endl;\n}\n\ncout << x << endl;</pre>",
  answer: "5\n5\nhello\n5",
  explanation: "if æ–‡ã®ä¸­ã§ string x = \"hello\"; ã«ã‚ˆã‚Šã€<br>æ–°ã—ã„ã‚¹ã‚³ãƒ¼ãƒ—ã§æ–‡å­—åˆ—å‹ã® x ãŒå®£è¨€ã•ã‚Œã¦ã„ã‚‹ã€‚<br>å¤–å´ã® int x ã¨ã¯åˆ¥ç‰©ãªã®ã§ã€æœ€åˆã¨æœ€å¾Œã¯ 5 ã®ã¾ã¾ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã®å‡ºåŠ›ã‚’ã€åŠè§’ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<pre>for (int i = 0; i < 3; i++) {\n  for (int j = 0; j < 3; j++) {\n    if ((i + j) % 3 == 0) {\n      cout << i << \" \" << j << endl;\n    }\n  }\n}</pre>",
  answer: "0 0\n1 2\n2 1",
  explanation: "i + j ãŒ 3 ã®å€æ•°ï¼ˆ0, 3, 6...ï¼‰ã®ã¨ãã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ãƒ«ãƒ¼ãƒ—ã¯ i, j ã¨ã‚‚ã« 0ã€œ2 ã®3å›ãªã®ã§ã€(0,0), (1,2), (2,1) ã®3ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ¡ä»¶ã‚’æº€ãŸã™ã€‚"
},

];

function toHalfWidth(str) {
  return str.replace(/[ï¼-ï½]/g, function(s) {
    return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);
  }).replace(/ã€€/g, ' ');
}

function normalizeInput(str) {
  return toHalfWidth(str.trim()).replace(/\s+/g, ' ');
}

    function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

    let current = 0;
    let score = 0;
    let backClickCount = 0;

   const backButtonHome = document.querySelector(".back-button");
if (backButtonHome) {
  backButtonHome.addEventListener("click", function(e) {
    e.preventDefault();
    if (backClickCount === 0) {
      alert("æœ¬å½“ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æˆ»ã‚Šã¾ã™ã€‚");
      backClickCount++;
    } else {
      window.location.href = "C++.html";
    }
  });
}


    function startQuiz() {
      if(bgmToggleBtn.textContent == "â–¶ï¸ BGMã‚’å†ç”Ÿ") {
      document.getElementById('bgm').play();
      bgmToggleBtn.textContent = 'â¸ï¸ BGMã‚’åœæ­¢';
      }
      shuffle(questions);
      current = 0;
      document.getElementById("home").style.display = "none";
      document.getElementById("quiz").style.display = "block";
      showQuestion(current);
    }

    function showQuestion(index) {
      const q = questions[index];

      const container = document.getElementById("quiz");
      container.innerHTML = "";

      const question = document.createElement("div");
      question.innerHTML = `<strong>Q${index + 1}:</strong> ${q.q}`;
      container.appendChild(question);

      const input = document.createElement("textarea");
      input.placeholder = "ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„";
      container.appendChild(input);

      const answerButton = document.createElement("button");
      answerButton.textContent = "è§£ç­”ã™ã‚‹";
      container.appendChild(answerButton);

      const result = document.createElement("div");
      result.className = "result";
      container.appendChild(result);

      const explanation = document.createElement("div");
      explanation.className = "explanation";
      container.appendChild(explanation);

      const nextButton = document.createElement("button");
      nextButton.textContent = "æ¬¡ã¸";
      nextButton.style.display = "none";
      container.appendChild(nextButton);

      const backButton = document.createElement("a");
      backButton.href = "C++.html";
      backButton.textContent = "å•é¡Œé¸æŠã«æˆ»ã‚‹";
      backButton.className = "home-button";
      container.appendChild(backButton);
      backButton.addEventListener("click", function(e) {
  e.preventDefault();
  if (backClickCount === 0) {
    alert("æœ¬å½“ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æˆ»ã‚Šã¾ã™ã€‚");
    backClickCount++;
  } else {
    window.location.href = "C++.html";
  }
});

      let emptyClickCount = 0;

      answerButton.addEventListener("click", () => {
  const userInput = input.value.trim();

  if (userInput === "") {
    emptyClickCount++;
    if (emptyClickCount === 1) {
      result.textContent = "ä½•ã‚‚å…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚‚ã†ä¸€åº¦æŠ¼ã™ã¨æ­£è§£ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚";
      result.style.color = "black";
      return;
    }
  }

  input.disabled = true;
  const seCorrect = document.getElementById("se-correct");
  const seWrong = document.getElementById("se-wrong");

  const normalizedUser = normalizeInput(userInput);
  const normalizedAns = normalizeInput(q.answer);
  if (normalizedUser === normalizedAns) {
  score++;
  seCorrect.currentTime = 0;
  seCorrect.play();
  result.textContent = "â—‹ æ­£è§£ã§ã™ï¼";
  result.classList.add("correct");
  result.style.color = "green";
  explanation.innerHTML = q.explanation;
} else {
   seWrong.currentTime = 0;
  seWrong.play();
  result.innerHTML = `Ã— ä¸æ­£è§£ã§ã™ã€‚<br><strong>æ­£è§£ï¼š</strong><pre>${q.answer}</pre>`;
  result.classList.add("wrong");
  result.style.color = "red";
  explanation.innerHTML = q.explanation;
}

  answerButton.style.display = "none";
  nextButton.style.display = "block";
});


    nextButton.addEventListener("click", () => {
    setTimeout(() => {
    current++;
    backClickCount = 0;
    if (current < questions.length) {
      showQuestion(current);
    } else {
      const seEnd = document.getElementById('se-end');
      seEnd.currentTime = 0;
      seEnd.play();
      container.innerHTML = `<h2>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼å…¨${questions.length}å•ãŒçµ‚äº†ã—ã¾ã—ãŸã€‚<br><br>${score}å•æ­£è§£ã—ã¾ã—ãŸï¼</h2>`;
      const today = new Date().toLocaleString();
      const newRecord = { date: today, score: score };

      let ranking = JSON.parse(localStorage.getItem(RANKING_KEY) || "[]");
      ranking.push(newRecord);

      ranking.sort((a, b) => b.score - a.score);
      ranking = ranking.slice(0, 5);

      localStorage.setItem(RANKING_KEY, JSON.stringify(ranking));

      const rankingList = document.createElement("div");
      rankingList.innerHTML = "<h3>ğŸ†æ­£è§£æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°(ãƒ­ãƒ¼ã‚«ãƒ«)</h3>";

      ranking.forEach((r, i) => {
          rankingList.innerHTML += `${i + 1}ä½: ${r.score}ç‚¹ï¼ˆ${r.date}ï¼‰<br>`;
      });

      const retryBtn = document.createElement("button");
          retryBtn.textContent = "æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™";
          retryBtn.onclick = () => {
          score = 0;
          backClickCount = 0;
          shuffle(questions);
          current = 0;
          showQuestion(current);
        };

      let resetClickCount = 0;

      const resetBtn = document.createElement("button");
      resetBtn.textContent = "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ";
      resetBtn.onclick = () => {
      if (resetClickCount === 0) {
          alert("æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚");
          resetClickCount++;
        } else {
            localStorage.removeItem(RANKING_KEY);
            location.reload();
        }
        };
        const backBtn = document.createElement("a");
        backBtn.href = "C++.html";
        backBtn.textContent = "å•é¡Œé¸æŠã«æˆ»ã‚‹";
        backBtn.className = "home-button";
        container.appendChild(backBtn);
        container.appendChild(retryBtn);
        container.appendChild(rankingList);
        container.appendChild(resetBtn);
    }
    }, 100);
  });
}

const bgm = document.getElementById('bgm');
    const bgmToggleBtn = document.getElementById('bgm-toggle');

    bgmToggleBtn.addEventListener('click', () => {
        if (!bgm.paused) {
            bgm.pause();
            bgmToggleBtn.textContent = 'â–¶ï¸ BGMã‚’å†é–‹';
        } else {
            bgm.play();
            bgmToggleBtn.textContent = 'â¸ï¸ BGMã‚’åœæ­¢';
    }
  });
  </script>
</body>
</html>
