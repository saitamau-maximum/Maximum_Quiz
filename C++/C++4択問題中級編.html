<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C++ 4æŠå•é¡Œ ä¸­ç´šç·¨</title>
  <link rel="stylesheet" href="../keep_out/style.css" />
  <style>
    .options label.disabled {
      pointer-events: none;
      color: #000;
    }
  </style>
  <audio id="se-correct" src="../keep_out/correct.mp3" preload="auto"></audio>
  <audio id="se-wrong" src="../keep_out/wrong.mp3" preload="auto"></audio>

</head>
<body>
  <audio id="bgm" src="../keep_out/BGM.mp3" loop></audio>
  <button id="bgm-toggle">â–¶ï¸ BGMã‚’å†ç”Ÿ</button>
  <div class="quiz-container" id="home">
    <h1>C++ 4æŠã‚¯ã‚¤ã‚º ä¸­ç´šç·¨</h1>
    <p>å…¨10å•ã§ã™ã€‚</p>
    <button onclick="startQuiz()">é–‹å§‹</button>
    <a href="C++.html" class="back-button">å•é¡Œé¸æŠã«æˆ»ã‚‹</a>
  </div>

  <div class="quiz-container" id="quiz" style="display: none;"></div>

  <script>
    const RANKING_KEY = "cpp_select_quiz_ranking_normal";
    const questions = [
      {
        q: `ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã¯ï¼Ÿ<pre>int a = 10;\nint b = 3;\ncout << double(a / b) << endl;</pre>`,
        options: [
          "A. 3.33333",
          "B. 3",
          "C. 3.0",
          "D. ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹"
        ],
        answer: 2,
        explanation: "a / b ã¯ã©ã£ã¡ã‚‚ int ã ã‹ã‚‰ æ•´æ•°ã®å‰²ã‚Šç®— â†’ çµæœã¯ 3ã€‚<br>ãã‚Œã‚’ double(3) ã«ã™ã‚‹ã®ã§ 3.0 ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚"
      },

      {
        q: `ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã¯ï¼Ÿ<pre>int a = 10;\nint b = 3;\ncout << (double)a / b << endl;</pre>`,
        options: [
          "A. 3.33333",
          "B. 3",
          "C. 3.0",
          "D. ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹"
        ],
        answer: 0,
        explanation: "(double)a ã§å…ˆã« 10 ãŒ 10.0 ã«ãªã‚‹ <br>â†’ 10.0 / 3 ã¯ å®Ÿæ•°ã®å‰²ã‚Šç®—ã«ãªã‚‹ã®ã§ 3.33333...ã€‚"
      },

      {
        q: `ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã¯ï¼Ÿ<pre>int x = 10;\n{\n  int x = 5;\n  cout << x << " ";\n}\ncout << x << endl;</pre>`,
        options: [
          "A. 5 5",
          "B. 5 10",
          "C. 10 5",
          "D. ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹"
        ],
        answer: 1,
        explanation: "ãƒ–ãƒ­ãƒƒã‚¯å†…ã® int x = 5; ã¯å¤–å´ã® x ã‚’éš ã—ã¦ã‚‹ï¼ˆã‚·ãƒ£ãƒ‰ã‚¦ã‚¤ãƒ³ã‚°ï¼‰<br> â†’ ãƒ–ãƒ­ãƒƒã‚¯å†…: 5ã€ãƒ–ãƒ­ãƒƒã‚¯å¤–: 10ã€‚"
      },

      {
        q: `ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚‚ x ã®å€¤ãŒå¤‰ã‚ã‚‰ãªã„ã®ã¯ãªãœï¼Ÿ<pre>void addTen(int x) {\n  x += 10;\n}\n\nint main() {\n  int x = 5;\n  addTen(x);\n  cout << x << endl;\n  return 0;\n}</pre>`,
        options: [
          "A. é–¢æ•°ãŒå‘¼ã°ã‚Œã¦ã„ãªã„ã‹ã‚‰",
          "B. å€¤æ¸¡ã—ãªã®ã§ x ã®å¤‰æ›´ãŒåæ˜ ã•ã‚Œãªã„",
          "C. 10 ã‚’è¶³ã™å‡¦ç†ãŒé–“é•ã£ã¦ã„ã‚‹",
          "D. cout ã®ä½ç½®ãŒæ‚ªã„"
        ],
        answer: 1,
        explanation: "é–¢æ•°å¼•æ•°ã« int x ã¨æ›¸ãã¨ã€å…ƒã®å€¤ã®ã‚³ãƒ”ãƒ¼ã«ãªã‚‹ï¼ˆå€¤æ¸¡ã—ï¼‰<br> â†’ é–¢æ•°å†…ã§ x ã‚’å¤‰ãˆã¦ã‚‚ã€main ã® x ã«ã¯å½±éŸ¿ãªã—ã€‚"
      },

      {
        q: "ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã¯ï¼Ÿ<pre>int i = 0;\nwhile (i != 10) {\n  i += 3;\n  cout << i << endl;\n}</pre>",
        options: [
          "A. TLEã«ãªã‚‹ï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—ï¼‰",
          "B. ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹",
          "C. 10ä»¥ä¸‹ã®3ã®å€æ•°ãŒè¡¨ç¤ºã•ã‚Œã‚‹",
          "D. 0 ~ 10ã®å…¨ã¦ã®æ•°å­—ãŒè¡¨ç¤ºã•ã‚Œã‚‹"
        ],
        answer: 0,
        explanation: "ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯whileæ–‡ã‹ã‚‰æŠœã‘ã‚‹ã“ã¨ãŒã§ããªã„ã®ã§ã€ç„¡é™ãƒ«ãƒ¼ãƒ—ã¨ãªã‚ŠTLEã™ã‚‹ã€‚"
      },

      {
        q: "ã“ã®ã‚³ãƒ¼ãƒ‰ãŒç„¡é™ãƒ«ãƒ¼ãƒ—ã«ãªã‚‹ç†ç”±ã¯ï¼Ÿ<pre>int i = 0;\nwhile (i != 10) {\n  i += 3;\n  cout << i << endl;\n}</pre>",
        options: [
          "A. i ã¯10ã«ãªã‚‰ãªã„ã‹ã‚‰",
          "B. whileæ–‡ã®æ¡ä»¶ãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã‚‰",
          "C. += ã®æ›¸ãæ–¹ãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã‚‰",
          "D. ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§ i ãŒæ¸›å°‘ã—ã¦ã‚‹ã‹ã‚‰"
        ],
        answer: 0,
        explanation: "i ã¯ 0 â†’ 3 â†’ 6 â†’ 9 â†’ 12 ã¨ã„ã†ãµã†ã« 10 ã‚’é£›ã³è¶Šãˆã¦ã—ã¾ã†ãŸã‚ã€<br>i != 10 ã‚’æ°¸é ã«æº€ãŸã—ã¦ã—ã¾ã†ã€‚"
      },

      {
        q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã€ä½•å› '1' ã¨å‡ºåŠ›ã•ã‚Œã‚‹ã‹ï¼Ÿ<pre>int main() {\n  for (int i = 0; i < 3; i++) {\n    for (int j = 0; j < 3; j++) {\n      if (i == j) break;\n      cout << 1 << endl;\n    }\n  }\n  return 0;\n}</pre>",
        options: [
          "3å›",
          "4å›",
          "5å›",
          "6å›"
        ],
        answer: 0,
        explanation: "å†…å´ã®ãƒ«ãƒ¼ãƒ—ã¯ i == j ã®æ™‚ã« break ã§æŠœã‘ã‚‹ãŸã‚ã€i < jã«ãªã‚‹ã“ã¨ã¯ãªã„ã€‚<br>ã‚ˆã£ã¦(i, j) = (1, 0) ã€(2, 0) ã€(2, 1)ã®ã¨ãã« 1 ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚<br>ã‚ˆã£ã¦å‡ºåŠ›ã•ã‚Œã‚‹å›æ•°ã¯3å›ã€‚"
      },

{
  q: "æ¬¡ã®å†å¸°é–¢æ•°ã‚’å®Ÿè¡Œã—ãŸã¨ãã€å‡ºåŠ›ã•ã‚Œã‚‹å€¤ã¯ä½•ã‹ï¼Ÿ<pre>void func(int n) {\n  if (n == 0) return;\n  cout << n << ' ';\n  func(n - 1);\n}\nint main() {\n  func(3);\n  return 0;\n}</pre>",
  options: [
    "3 2 1",
    "3 2 1 0",
    "1 2 3",
    "0 1 2 3"
  ],
  answer: 0,
  explanation: "å†å¸°é–¢æ•° func(3) ã¯ n ãŒ0ã«ãªã‚‹ã¾ã§å†å¸°å‘¼ã³å‡ºã—ã‚’è¡Œã„ã€<br>å‘¼ã³å‡ºã—ã®é †ç•ªã¯ 3 2 1 ã¨ãªã‚‹ã€‚<br>æœ€å¾Œã« n == 0 ã§çµ‚äº†ã™ã‚‹ã®ã§ã€3 2 1 ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã€b ã®å€¤ã¯ä½•ã«ãªã‚‹ã‹ï¼Ÿ<pre>int a = 5;\nint& b = a;\na = 10;\ncout << b << endl;</pre>",
  options: [
    "5",
    "10",
    "ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹",
    "æœªå®šç¾©"
  ],
  answer: 1,
  explanation: "bã¯aã®å‚ç…§ã§ã‚ã‚‹ãŸã‚ã€aã‚’å¤‰æ›´ã™ã‚‹ã¨bã‚‚åŒã˜å€¤ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚<br>ã—ãŸãŒã£ã¦ã€bã®å€¤ã¯10ã«ãªã‚‹ã€‚"
},

{
  q: "æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã€c ã®å€¤ã¯ä½•ã«ãªã‚‹ã‹ï¼Ÿ<pre>int a = 5;\nint& b = a;\nint& c = b;\na = 10;\ncout << c << endl;</pre>",
  options: [
    "5",
    "10",
    "ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹",
    "æœªå®šç¾©"
  ],
  answer: 1,
  explanation: "bã¯aã®å‚ç…§ã§ã€cã¯bã®å‚ç…§ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€aã‚’10ã«å¤‰æ›´ã™ã‚‹ã¨ã€<br>bãŒ10ã¨ãªã‚‹ã€‚bãŒ10ã«ãªã£ãŸã®ã§cã‚‚10ã¨ãªã‚‹ã€‚"
},

    ];

    function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}


    let current = 0;
    let score = 0;
    let backClickCount = 0;

const backButtonHome = document.querySelector(".back-button");
if (backButtonHome) {
  backButtonHome.addEventListener("click", function(e) {
    e.preventDefault();
    if (backClickCount === 0) {
      alert("æœ¬å½“ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æˆ»ã‚Šã¾ã™ã€‚");
      backClickCount++;
    } else {
      window.location.href = "C++.html";
    }
  });
}


    

    const homeEl = document.getElementById("home");
    const quizEl = document.getElementById("quiz");

    function startQuiz() {
      if(bgmToggleBtn.textContent == "â–¶ï¸ BGMã‚’å†ç”Ÿ") {
      document.getElementById('bgm').play();
      bgmToggleBtn.textContent = 'â¸ï¸ BGMã‚’åœæ­¢';
      }
      shuffle(questions);
      current = 0;
      homeEl.style.display = "none";
      quizEl.style.display = "block";
      showQuestion(current);
    }

    function showQuestion(index) {
      quizEl.innerHTML = "";
      const q = questions[index];

      const container = document.createElement("div");
      container.className = "question";

      const title = document.createElement("div");
      title.innerHTML = `<strong>Q${index + 1}:</strong> ${q.q}`;
      container.appendChild(title);

      const options = document.createElement("div");
      options.className = "options";

      q.options.forEach((opt, i) => {
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "radio";
        input.name = `q${index}`;
        input.value = i;
        label.appendChild(input);
        label.appendChild(document.createTextNode(" " + opt));
        options.appendChild(label);
      });

      container.appendChild(options);

      const button = document.createElement("button");
      button.textContent = "è§£ç­”";

      const result = document.createElement("div");
      result.className = "result";

      const explanation = document.createElement("div");
      explanation.className = "explanation";

      const backButton = document.createElement("a");
      backButton.href = "C++.html";
      backButton.className = "home-button";
      backButton.textContent = "å•é¡Œé¸æŠã«æˆ»ã‚‹";
  backButton.addEventListener("click", function(e) {
    e.preventDefault();
    if (backClickCount === 0) {
      alert("æœ¬å½“ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æˆ»ã‚Šã¾ã™ã€‚");
      backClickCount++;
    } else {
      window.location.href = "C++.html";
    }
  });


      const nextButton = document.createElement("button");
      nextButton.textContent = "æ¬¡ã¸";
      nextButton.style.display = "none";
      nextButton.style.margin = "20px auto";

      nextButton.onclick = () => {
        setTimeout(() => {
        current++;
        backClickCount = 0;
        if (current < questions.length) {
          showQuestion(current);
        } else {
          backClickCount = 1;
          quizEl.innerHTML = "";
          const container = document.createElement("div");
          quizEl.innerHTML = `<h2>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼å…¨${questions.length}å•ãŒçµ‚äº†ã—ã¾ã—ãŸã€‚<br><br>${score}å•æ­£è§£ã—ã¾ã—ãŸï¼</h2>`;
          const today = new Date().toLocaleString();
          const newRecord = { date: today, score: score };

          let ranking = JSON.parse(localStorage.getItem(RANKING_KEY) || "[]");
          ranking.push(newRecord);

          ranking.sort((a, b) => b.score - a.score);
          ranking = ranking.slice(0, 5);

          localStorage.setItem(RANKING_KEY, JSON.stringify(ranking));

          const rankingList = document.createElement("div");
          rankingList.innerHTML = "<h3>ğŸ†æ­£è§£æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°(ãƒ­ãƒ¼ã‚«ãƒ«)</h3>";

          ranking.forEach((r, i) => {
            rankingList.innerHTML += `${i + 1}ä½: ${r.score}ç‚¹ï¼ˆ${r.date}ï¼‰<br>`;
          });

          const retryBtn = document.createElement("button");
          retryBtn.textContent = "æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™";
          retryBtn.onclick = () => {
          score = 0;
          backClickCount = 0;
          shuffle(questions);
          current = 0;
          showQuestion(current);
        };


          let resetClickCount = 0;

          const resetBtn = document.createElement("button");
          resetBtn.textContent = "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ";
          resetBtn.onclick = () => {
            if (resetClickCount === 0) {
              alert("æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚");
              resetClickCount++;
            } else {
              localStorage.removeItem(RANKING_KEY);
              location.reload();
            }
          };
            quizEl.appendChild(backButton);
            container.appendChild(retryBtn);
            container.appendChild(rankingList);
            container.appendChild(resetBtn);
            quizEl.appendChild(container);
          }
        }, 100);
      };

      const nextButtonWrapper = document.createElement("div");
      nextButtonWrapper.style.textAlign = "center";
      nextButtonWrapper.appendChild(nextButton);

      button.onclick = () => {
        const selected = container.querySelector("input:checked");
        if (!selected) {
          result.textContent = "é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚";
          result.style.color = "black";
          return;
        }

        const isCorrect = parseInt(selected.value) === q.answer;
        const seCorrect = document.getElementById("se-correct");
        const seWrong = document.getElementById("se-wrong");

        if (isCorrect) {
          result.classList.add("correct");
          score++;
          seCorrect.currentTime = 0;
          seCorrect.play();
        } else {
          result.classList.add("wrong");
          seWrong.currentTime = 0;
          seWrong.play();
      }

        result.textContent = isCorrect ? "â—‹ æ­£è§£ã§ã™ï¼" : `Ã— ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ï¼š${q.options[q.answer]}`;
        result.style.color = isCorrect ? "green" : "red";
        explanation.innerHTML = q.explanation;

        const labels = container.querySelectorAll("label");
        labels.forEach(label => label.classList.add("disabled"));

        button.style.display = "none";
        nextButton.style.display = "inline-block";
      };

      container.appendChild(button);
      container.appendChild(result);
      container.appendChild(explanation);
      container.appendChild(nextButtonWrapper);
      container.appendChild(backButton);

      quizEl.appendChild(container);
    }

  const bgm = document.getElementById('bgm');
  const bgmToggleBtn = document.getElementById('bgm-toggle');

  bgmToggleBtn.addEventListener('click', () => {
    if (!bgm.paused) {
      bgm.pause();
      bgmToggleBtn.textContent = 'â–¶ï¸ BGMã‚’å†é–‹';
    } else {
      bgm.play();
      bgmToggleBtn.textContent = 'â¸ï¸ BGMã‚’åœæ­¢';
  }
});

  </script>
</body>
</html>
